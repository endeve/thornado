MDEFS ?=
PP ?= -D

HYDRO                  ?= NONRELATIVISTIC
HYDRO_RIEMANN_SOLVER   ?= HLL
NEUTRINO_MATTER_SOLVER ?= EMAB
TWOMOMENT_ORDER        ?= ORDER_1

DEFINES = \
$(MDEFS)$(PP)MICROPHYSICS_$(MICROPHYSICS) \
$(MDEFS)$(PP)MOMENT_CLOSURE_$(MOMENT_CLOSURE) \
$(MDEFS)$(PP)NEUTRINO_MATTER_SOLVER_$(NEUTRINO_MATTER_SOLVER) \
$(MDEFS)$(PP)TWOMOMENT_$(TWOMOMENT_ORDER) \
$(MDEFS)$(PP)GRAVITY_SOLVER_$(GRAVITY_SOLVER) \
$(MDEFS)$(PP)HYDRO_$(HYDRO) \
$(MDEFS)$(PP)HYDRO_RIEMANN_SOLVER_$(HYDRO_RIEMANN_SOLVER)

ifeq ($(USE_GPU),TRUE)
   DEFINES      += $(MDEFS)$(PP)THORNADO_GPU
   ifeq ($(USE_CUDA),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_CUDA
   else ifeq ($(USE_HIP),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_HIP
   endif
   ifeq ($(USE_OACC),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_OACC
      DEFINES   += $(MDEFS)$(PP)$(MICROPHYSICS)_OACC
   else ifeq ($(USE_OMP_OL),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_OMP_OL
      DEFINES   += $(MDEFS)$(PP)$(MICROPHYSICS)_OMP_OL
   endif
   ifeq ($(USE_MAGMA),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_LA_MAGMA
   else ifeq ($(USE_ROCM),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_LA_ROCM
   else ifeq ($(USE_ONEMKL),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_LA_ONEMKL
   else ifeq ($(USE_CUBLAS),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_LA_CUBLAS
   endif
else
   ifeq ($(USE_OMP),TRUE)
      DEFINES   += $(MDEFS)$(PP)THORNADO_OMP
      DEFINES   += $(MDEFS)$(PP)$(MICROPHYSICS)_OMP
   endif
   DEFINES      += $(MDEFS)$(PP)THORNADO_LA_LAPACK
endif
